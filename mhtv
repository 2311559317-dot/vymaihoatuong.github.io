<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Master AI - C√°ch Vi·∫øt CV Ph√π H·ª£p V·ªõi Nh√† Tuy·ªÉn D·ª•ng</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PDF.js & Mammoth.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script>
        window.onload = function() {
            if (typeof pdfjsLib !== 'undefined') {
                pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
            }
        };
    </script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #f0f9ff; scroll-behavior: smooth; }
        
        .medical-gradient-text {
            background: linear-gradient(to right, #0284c7, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid #bae6fd;
            box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.1), 0 2px 4px -1px rgba(14, 165, 233, 0.06);
        }

        .animate-fade-in { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        
        .upload-zone {
            background-color: #f0f9ff;
            background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='16' ry='16' stroke='%233B82F6' stroke-width='2' stroke-dasharray='12%2c 12' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
            transition: all 0.3s ease;
        }
        .upload-zone:hover { background-color: #e0f2fe; border-color: #0284c7; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                Upload: <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>,
                FileText: <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />,
                Check: <polyline points="20 6 9 17 4 12" />,
                Briefcase: <rect x="2" y="7" width="20" height="14" rx="2" ry="2" />,
                MedicalCross: <path d="M12 5v14M5 12h14" strokeWidth="3" />,
                HeartPulse: <path d="M22 12h-4l-3 9L9 3l-3 9H2" />,
                BrainCircuit: <path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" />,
                Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />,
                Home: <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />,
                
                Alert: <g><circle cx="12" cy="12" r="10" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" /></g>,
                Search: <g><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></g>,
                MapPin: <g><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" /><circle cx="12" cy="10" r="3" /></g>,
                ArrowDown: <g><line x1="12" y1="5" x2="12" y2="19" /><polyline points="19 12 12 19 5 12" /></g>,
                XCircle: <g><circle cx="12" cy="12" r="10" /><line x1="15" y1="9" x2="9" y2="15" /><line x1="9" y1="9" x2="15" y2="15" /></g>,
                Lightbulb: <g><line x1="9" y1="18" x2="15" y2="18" /><line x1="10" y1="22" x2="14" y2="22" /><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 9.5 6 4.65 4.65 0 0 0 3.5 11.5c0 1.07.49 2.07 1.41 2.5.76.76 1.23 1.52 1.41 2.5" /></g>,
                Edit: <g><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></g>,
                Quiz: <g><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></g>,
                Refresh: <g><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></g>,
                Camera: <g><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></g>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || icons.HeartPulse}
                </svg>
            );
        };

        // --- DATA ---
        const PROVINCES = ["An Giang", "B√† R·ªãa - V≈©ng T√†u", "B·∫Øc Giang", "B·∫Øc K·∫°n", "B·∫°c Li√™u", "B·∫Øc Ninh", "B·∫øn Tre", "B√¨nh ƒê·ªãnh", "B√¨nh D∆∞∆°ng", "B√¨nh Ph∆∞·ªõc", "B√¨nh Thu·∫≠n", "C√† Mau", "Cao B·∫±ng", "C·∫ßn Th∆°", "ƒê√† N·∫µng", "ƒê·∫Øk L·∫Øk", "ƒê·∫Øk N√¥ng", "ƒêi·ªán Bi√™n", "ƒê·ªìng Nai", "ƒê·ªìng Th√°p", "Gia Lai", "H√† Giang", "H√† Nam", "H√† N·ªôi", "H√† Tƒ©nh", "H·∫£i D∆∞∆°ng", "H·∫£i Ph√≤ng", "H·∫≠u Giang", "H√≤a B√¨nh", "H∆∞ng Y√™n", "Kh√°nh H√≤a", "Ki√™n Giang", "Kon Tum", "Lai Ch√¢u", "L√¢m ƒê·ªìng", "L·∫°ng S∆°n", "L√†o Cai", "Long An", "Nam ƒê·ªãnh", "Ngh·ªá An", "Ninh B√¨nh", "Ninh Thu·∫≠n", "Ph√∫ Th·ªç", "Ph√∫ Y√™n", "Qu·∫£ng B√¨nh", "Qu·∫£ng Nam", "Qu·∫£ng Ng√£i", "Qu·∫£ng Ninh", "Qu·∫£ng Tr·ªã", "S√≥c TrƒÉng", "S∆°n La", "T√¢y Ninh", "Th√°i B√¨nh", "Th√°i Nguy√™n", "Thanh H√≥a", "Th·ª´a Thi√™n Hu·∫ø", "Ti·ªÅn Giang", "TP. H·ªì Ch√≠ Minh", "Tr√† Vinh", "Tuy√™n Quang", "Vƒ©nh Long", "Vƒ©nh Ph√∫c", "Y√™n B√°i"].sort((a, b) => a.localeCompare(b, 'vi'));
        const REAL_HOSPITALS_DB = { "H√† N·ªôi": ["B·ªánh vi·ªán B·∫°ch Mai", "B·ªánh vi·ªán Vi·ªát ƒê·ª©c", "B·ªánh vi·ªán 108", "B·ªánh vi·ªán ƒê·∫°i h·ªçc Y", "Vinmec Times City"], "TP. H·ªì Ch√≠ Minh": ["B·ªánh vi·ªán Ch·ª£ R·∫´y", "B·ªánh vi·ªán T·ª´ D≈©", "B·ªánh vi·ªán ƒê·∫°i h·ªçc Y D∆∞·ª£c", "B·ªánh vi·ªán 115", "B·ªánh vi·ªán Nhi ƒë·ªìng 1"], "ƒê√† N·∫µng": ["B·ªánh vi·ªán ƒê√† N·∫µng", "B·ªánh vi·ªán C", "B·ªánh vi·ªán Ho√†n M·ªπ"], "C·∫ßn Th∆°": ["BV ƒêa khoa Trung ∆∞∆°ng C·∫ßn Th∆°"], "H·∫£i Ph√≤ng": ["BV H·ªØu ngh·ªã Vi·ªát Ti·ªáp"] };
        const SPECIALTIES = [{ id: "da_khoa", name: "ƒêi·ªÅu d∆∞·ª°ng ƒêa khoa" }, { id: "nhi", name: "ƒêi·ªÅu d∆∞·ª°ng Nhi khoa" }, { id: "ho_sinh", name: "ƒêi·ªÅu d∆∞·ª°ng H·ªô sinh" }, { id: "tam_than", name: "ƒêi·ªÅu d∆∞·ª°ng T√¢m th·∫ßn" }, { id: "hoi_suc", name: "ƒêi·ªÅu d∆∞·ª°ng H·ªìi s·ª©c c·∫•p c·ª©u" }, { id: "tim_mach", name: "ƒêi·ªÅu d∆∞·ª°ng Tim m·∫°ch, H√¥ h·∫•p" }, { id: "ngoai", name: "ƒêi·ªÅu d∆∞·ª°ng Ngo·∫°i th·∫ßn kinh" }, { id: "chuyen_khoa", name: "ƒêi·ªÅu d∆∞·ª°ng Tai M≈©i H·ªçng, M·∫Øt, RHM" }, { id: "da_lieu", name: "ƒêi·ªÅu d∆∞·ª°ng Da li·ªÖu, Th·∫©m m·ªπ" }];
        
        // Danh s√°ch b·ªánh vi·ªán to√†n qu·ªëc cho autocomplete
        const VIETNAM_HOSPITALS = [
            "B·ªánh vi·ªán B·∫°ch Mai", "B·ªánh vi·ªán H·ªØu ngh·ªã Vi·ªát ƒê·ª©c", "B·ªánh vi·ªán Trung ∆∞∆°ng Qu√¢n ƒë·ªôi 108", "B·ªánh vi·ªán ƒê·∫°i h·ªçc Y H√† N·ªôi", 
            "B·ªánh vi·ªán Thanh Nh√†n", "B·ªánh vi·ªán Xanh P√¥n", "B·ªánh vi·ªán E", "B·ªánh vi·ªán Ph·ª• s·∫£n Trung ∆∞∆°ng", "B·ªánh vi·ªán Nhi Trung ∆∞∆°ng", 
            "B·ªánh vi·ªán K", "B·ªánh vi·ªán H·ªØu ngh·ªã", "B·ªánh vi·ªán B∆∞u ƒëi·ªán", "B·ªánh vi·ªán ƒêa khoa ƒê·ªëng ƒêa", "B·ªánh vi·ªán ƒêa khoa H√† ƒê√¥ng",
            "B·ªánh vi·ªán Ch·ª£ R·∫´y", "B·ªánh vi·ªán T·ª´ D≈©", "B·ªánh vi·ªán ƒê·∫°i h·ªçc Y D∆∞·ª£c TPHCM", "B·ªánh vi·ªán Nh√¢n d√¢n 115", 
            "B·ªánh vi·ªán Nhi ƒë·ªìng 1", "B·ªánh vi·ªán Nhi ƒë·ªìng 2", "B·ªánh vi·ªán Nhi ƒë·ªìng Th√†nh ph·ªë", "B·ªánh vi·ªán H√πng V∆∞∆°ng", 
            "B·ªánh vi·ªán Th·ªëng Nh·∫•t", "B·ªánh vi·ªán Qu√¢n y 175", "B·ªánh vi·ªán B√¨nh D√¢n", "B·ªánh vi·ªán Ph·∫°m Ng·ªçc Th·∫°ch", "B·ªánh vi·ªán Nh√¢n d√¢n Gia ƒê·ªãnh",
            "B·ªánh vi·ªán Tr∆∞ng V∆∞∆°ng", "B·ªánh vi·ªán Nguy·ªÖn Tri Ph∆∞∆°ng",
            "B·ªánh vi·ªán ƒê√† N·∫µng", "B·ªánh vi·ªán C ƒê√† N·∫µng", "B·ªánh vi·ªán Ho√†n M·ªπ ƒê√† N·∫µng", "B·ªánh vi·ªán Ph·ª• s·∫£n - Nhi ƒê√† N·∫µng", "B·ªánh vi·ªán Ung b∆∞·ªõu ƒê√† N·∫µng",
            "B·ªánh vi·ªán Trung ∆∞∆°ng Hu·∫ø", "B·ªánh vi·ªán Tr∆∞·ªùng ƒê·∫°i h·ªçc Y D∆∞·ª£c Hu·∫ø", 
            "B·ªánh vi·ªán ƒêa khoa t·ªânh Kh√°nh H√≤a", "B·ªánh vi·ªán ƒêa khoa t·ªânh Thanh H√≥a", "B·ªánh vi·ªán H·ªØu ngh·ªã ƒêa khoa Ngh·ªá An",
            "B·ªánh vi·ªán ƒêa khoa Trung ∆∞∆°ng C·∫ßn Th∆°", "B·ªánh vi·ªán Ph·ª• s·∫£n TP. C·∫ßn Th∆°", "B·ªánh vi·ªán Nhi ƒë·ªìng C·∫ßn Th∆°",
            "B·ªánh vi·ªán ƒêa khoa ƒê·ªìng Nai", "B·ªánh vi·ªán ƒêa khoa Th·ªëng Nh·∫•t (ƒê·ªìng Nai)", 
            "B·ªánh vi·ªán ƒêa khoa t·ªânh B√¨nh D∆∞∆°ng", "B·ªánh vi·ªán ƒêa khoa v√πng T√¢y Nguy√™n (ƒê·∫Øk L·∫Øk)",
            "B·ªánh vi·ªán H·ªØu ngh·ªã Vi·ªát Ti·ªáp (H·∫£i Ph√≤ng)", "B·ªánh vi·ªán Tr·∫ª em H·∫£i Ph√≤ng", "B·ªánh vi·ªán Ph·ª• s·∫£n H·∫£i Ph√≤ng", 
            "B·ªánh vi·ªán ƒêa khoa t·ªânh Qu·∫£ng Ninh", "B·ªánh vi·ªán B√£i Ch√°y", "B·ªánh vi·ªán ƒêa khoa t·ªânh B·∫Øc Ninh",
            "H·ªá th·ªëng Y t·∫ø Vinmec", "B·ªánh vi·ªán ƒêa khoa T√¢m Anh", "B·ªánh vi·ªán Thu C√∫c", "B·ªánh vi·ªán H·ªìng Ng·ªçc", 
            "B·ªánh vi·ªán FV", "B·ªánh vi·ªán Qu·ªëc t·∫ø H·∫°nh Ph√∫c", "B·ªánh vi·ªán Ho√†n M·ªπ", "B·ªánh vi·ªán ƒêa khoa Xuy√™n √Å"
        ];

        const JD_DATABASE = [
            {
                names: ["b·∫°ch mai", "bach mai"],
                name: "B·ªánh vi·ªán B·∫°ch Mai",
                type: "C√¥ng l·∫≠p h·∫°ng ƒë·∫∑c bi·ªát",
                jd: "1. Tr√¨nh ƒë·ªô: T·ªët nghi·ªáp ƒê·∫°i h·ªçc ƒêi·ªÅu d∆∞·ª°ng ch√≠nh quy (Kh√¥ng tuy·ªÉn t·∫°i ch·ª©c).\n2. Ch·ª©ng ch·ªâ: B·∫Øt bu·ªôc c√≥ Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ kh√°m ch·ªØa b·ªánh ƒë·∫ßy ƒë·ªß.\n3. Ngo·∫°i ng·ªØ: Ti·∫øng Anh tr√¨nh ƒë·ªô B1 Ch√¢u √Çu ho·∫∑c TOEIC 450 tr·ªü l√™n.\n4. K·ªπ nƒÉng chuy√™n m√¥n: Th√†nh th·∫°o quy tr√¨nh c·∫•p c·ª©u ng·ª´ng tu·∫ßn ho√†n, chƒÉm s√≥c b·ªánh nh√¢n th·ªü m√°y, l·ªçc m√°u li√™n t·ª•c.\n5. Th√°i ƒë·ªô: K·ª∑ lu·∫≠t nghi√™m, trung th·ª±c, ch·ªãu kh√≥ h·ªçc h·ªèi, ch·ªãu √°p l·ª±c cao.\n6. Th·ªùi gian: Tr·ª±c ƒë√™m 24/24 theo ph√¢n c√¥ng (tu·∫ßn 2-3 bu·ªïi).\n7. Quy·ªÅn l·ª£i: Thu nh·∫≠p tƒÉng th√™m theo hi·ªáu su·∫•t (P4), ƒë∆∞·ª£c ƒë√†o t·∫°o chuy√™n s√¢u trong n∆∞·ªõc v√† qu·ªëc t·∫ø."
            },
            {
                names: ["ch·ª£ r·∫´y", "cho ray"],
                name: "B·ªánh vi·ªán Ch·ª£ R·∫´y",
                type: "C√¥ng l·∫≠p h·∫°ng ƒë·∫∑c bi·ªát",
                jd: "1. Tr√¨nh ƒë·ªô: C·ª≠ nh√¢n ƒêi·ªÅu d∆∞·ª°ng h·ªá ch√≠nh quy.\n2. Ch·ª©ng ch·ªâ: C√≥ Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ (CCHN) ph√π h·ª£p v·ªõi ph·∫°m vi ho·∫°t ƒë·ªông chuy√™n m√¥n.\n3. Kinh nghi·ªám: ∆Øu ti√™n >1 nƒÉm kinh nghi·ªám l√¢m s√†ng t·∫°i c√°c b·ªánh vi·ªán tuy·∫øn t·ªânh/th√†nh ph·ªë.\n4. K·ªπ nƒÉng: Ki·ªÉm so√°t nhi·ªÖm khu·∫©n t·ªët, th√†nh th·∫°o k·ªπ thu·∫≠t ƒëi·ªÅu d∆∞·ª°ng c∆° b·∫£n v√† n√¢ng cao.\n5. Th√°i ƒë·ªô: Tinh th·∫ßn th√°i ƒë·ªô ph·ª•c v·ª• ng∆∞·ªùi b·ªánh nghi√™m t√∫c, h√≤a ƒë·ªìng, t√¥n tr·ªçng ƒë·ªìng nghi·ªáp.\n6. S·ª©c kh·ªèe: ƒê·ªß s·ª©c kh·ªèe tr·ª±c g√°c ƒë√™m, ƒëi c√¥ng t√°c tuy·∫øn khi c√≥ y√™u c·∫ßu.\n7. Quy·ªÅn l·ª£i: Th∆∞·ªüng l·ªÖ t·∫øt, ph·ª• c·∫•p ƒë·ªôc h·∫°i, c∆° h·ªôi thƒÉng ti·∫øn l√™n ƒêi·ªÅu d∆∞·ª°ng tr∆∞·ªüng."
            },
            {
                names: ["vi·ªát ƒë·ª©c", "viet duc"],
                name: "B·ªánh vi·ªán H·ªØu ngh·ªã Vi·ªát ƒê·ª©c",
                type: "Ngo·∫°i khoa",
                jd: "1. Tr√¨nh ƒë·ªô: T·ªët nghi·ªáp Cao ƒë·∫≥ng ƒêi·ªÅu d∆∞·ª°ng tr·ªü l√™n (∆Øu ti√™n ƒê·∫°i h·ªçc).\n2. Ch·ª©ng ch·ªâ: ∆Øu ti√™n c√≥ ch·ª©ng ch·ªâ d·ª•ng c·ª• ph√≤ng m·ªï, g√¢y m√™ h·ªìi s·ª©c.\n3. Th·ªÉ l·ª±c: Nhanh nh·∫πn, th·ªÉ l·ª±c t·ªët, c√≥ th·ªÉ ƒë·ª©ng ph·ª• m·ªï th·ªùi gian d√†i (6-8 ti·∫øng).\n4. K·ªπ nƒÉng: Th√†nh th·∫°o quy tr√¨nh v√¥ khu·∫©n tuy·ªát ƒë·ªëi, nh·∫≠n bi·∫øt nhanh d·ª•ng c·ª• ph·∫´u thu·∫≠t.\n5. Kinh nghi·ªám: ∆Øu ti√™n ·ª©ng vi√™n ƒë√£ c√≥ kinh nghi·ªám ph·ª• m·ªï t·∫°i c√°c b·ªánh vi·ªán ngo·∫°i khoa.\n6. √Åp l·ª±c: Ch·ªãu ƒë∆∞·ª£c √°p l·ª±c cao c·ªßa ph√≤ng m·ªï, kh√¥ng s·ª£ m√°u, ph·∫£n ·ª©ng nhanh.\n7. Thu nh·∫≠p: L∆∞∆°ng c·ª©ng + Th∆∞·ªüng theo ca m·ªï h·∫•p d·∫´n, m√¥i tr∆∞·ªùng ngo·∫°i khoa h√†ng ƒë·∫ßu."
            },
            {
                names: ["vinmec", "qu·ªëc t·∫ø vinmec"],
                name: "H·ªá th·ªëng Y t·∫ø Vinmec",
                type: "Qu·ªëc t·∫ø",
                jd: "1. Tr√¨nh ƒë·ªô: T·ªët nghi·ªáp ƒê·∫°i h·ªçc ƒêi·ªÅu d∆∞·ª°ng tr·ªü l√™n.\n2. Ngo·∫°i ng·ªØ: Ti·∫øng Anh giao ti·∫øp t·ªët (B·∫Øt bu·ªôc) ƒë·ªÉ l√†m vi·ªác v·ªõi chuy√™n gia v√† b·ªánh nh√¢n n∆∞·ªõc ngo√†i.\n3. Ngo·∫°i h√¨nh: ∆Øa nh√¨n, kh√¥ng n√≥i ng·ªçng, t√°c phong chuy√™n nghi·ªáp, kh√¥ng c√≥ h√¨nh xƒÉm l·ªô.\n4. K·ªπ nƒÉng: D·ªãch v·ª• kh√°ch h√†ng (Customer Service) xu·∫•t s·∫Øc, k·ªπ nƒÉng l·∫•y ven kh√¥ng ƒëau, chƒÉm s√≥c 1:1.\n5. Ch·ª©ng ch·ªâ: C√≥ CCHN ƒë·∫ßy ƒë·ªß, ∆∞u ti√™n c√°c ch·ª©ng ch·ªâ ACLS, BLS qu·ªëc t·∫ø.\n6. Kinh nghi·ªám: T·ªëi thi·ªÉu 2 nƒÉm t·∫°i c√°c b·ªánh vi·ªán l·ªõn.\n7. Quy·ªÅn l·ª£i: M√¥i tr∆∞·ªùng l√†m vi·ªác 5 sao, b·∫£o hi·ªÉm s·ª©c kh·ªèe cao c·∫•p, l∆∞∆°ng c·∫°nh tranh."
            }
        ];

        // H√†m t·∫°o JD chu·∫©n 10 y·∫øu t·ªë
        const generateJD = (hospitalName) => {
            const isPrivate = hospitalName.toLowerCase().includes('vinmec') || hospitalName.toLowerCase().includes('t√¢m anh') || hospitalName.toLowerCase().includes('qu·ªëc t·∫ø') || hospitalName.toLowerCase().includes('t∆∞ nh√¢n') || hospitalName.toLowerCase().includes('fv');
            const isSpecialized = hospitalName.toLowerCase().includes('nhi') || hospitalName.toLowerCase().includes('s·∫£n') || hospitalName.toLowerCase().includes('ph·ª• s·∫£n');
            
            let edu = isPrivate ? "T·ªët nghi·ªáp ƒê·∫°i h·ªçc ƒêi·ªÅu d∆∞·ª°ng tr·ªü l√™n." : "T·ªët nghi·ªáp Cao ƒë·∫≥ng ƒêi·ªÅu d∆∞·ª°ng tr·ªü l√™n (∆Øu ti√™n ƒê·∫°i h·ªçc).";
            let cert = "B·∫Øt bu·ªôc c√≥ Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ (CCHN) kh√°m ch·ªØa b·ªánh c√≤n hi·ªáu l·ª±c.";
            let exp = isPrivate ? "T·ªëi thi·ªÉu 2 nƒÉm kinh nghi·ªám t·∫°i c√°c b·ªánh vi·ªán l·ªõn." : "∆Øu ti√™n ·ª©ng vi√™n c√≥ kinh nghi·ªám, ch·∫•p nh·∫≠n sinh vi√™n m·ªõi ra tr∆∞·ªùng lo·∫°i Gi·ªèi.";
            let hardSkill = "Th√†nh th·∫°o quy tr√¨nh ƒëi·ªÅu d∆∞·ª°ng c∆° b·∫£n: Ti√™m, truy·ªÅn, thay bƒÉng, l·∫•y d·∫•u hi·ªáu sinh t·ªìn. S·ª≠ d·ª•ng t·ªët tin h·ªçc vƒÉn ph√≤ng.";
            if (isSpecialized) hardSkill += " C√≥ k·ªπ nƒÉng chƒÉm s√≥c ƒë·∫∑c th√π (Nhi/S·∫£n) l√† l·ª£i th·∫ø l·ªõn.";
            let softSkill = isPrivate ? "K·ªπ nƒÉng giao ti·∫øp xu·∫•t s·∫Øc, t∆∞ duy d·ªãch v·ª• (Service Mindset), th√°i ƒë·ªô √¢n c·∫ßn." : "Trung th·ª±c, c·∫©n th·∫≠n, ch·ªãu kh√≥, tu√¢n th·ªß k·ª∑ lu·∫≠t b·ªánh vi·ªán.";
            let lang = isPrivate ? "Ti·∫øng Anh giao ti·∫øp t·ªët (B·∫Øt bu·ªôc)." : "Ti·∫øng Anh tr√¨nh ƒë·ªô c∆° b·∫£n (ƒê·ªçc hi·ªÉu t√†i li·ªáu).";
            let health = "S·ª©c kh·ªèe t·ªët (Lo·∫°i I, II), kh√¥ng m·∫Øc b·ªánh truy·ªÅn nhi·ªÖm. Ngo·∫°i h√¨nh c√¢n ƒë·ªëi, kh√¥ng d·ªã t·∫≠t.";
            let time = "L√†m vi·ªác theo ca k√≠p, s·∫µn s√†ng tr·ª±c ƒë√™m v√† l√†m th√™m gi·ªù khi c√≥ y√™u c·∫ßu.";
            let demo = "Nam/N·ªØ, tu·ªïi d∆∞·ªõi 35.";
            let benefit = isPrivate ? "M√¥i tr∆∞·ªùng l√†m vi·ªác hi·ªán ƒë·∫°i, l∆∞∆°ng th∆∞·ªüng c·∫°nh tranh, b·∫£o hi·ªÉm s·ª©c kh·ªèe cao c·∫•p." : "Thu nh·∫≠p ·ªïn ƒë·ªãnh theo quy ƒë·ªãnh nh√† n∆∞·ªõc + thu nh·∫≠p tƒÉng th√™m, ƒë∆∞·ª£c ƒë√†o t·∫°o li√™n t·ª•c.";

            return `1. Tr√¨nh ƒë·ªô h·ªçc v·∫•n: ${edu}\n2. Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ: ${cert}\n3. Kinh nghi·ªám l√†m vi·ªác: ${exp}\n4. K·ªπ nƒÉng chuy√™n m√¥n: ${hardSkill}\n5. Th√°i ƒë·ªô & K·ªπ nƒÉng m·ªÅm: ${softSkill}\n6. Ngo·∫°i ng·ªØ & Tin h·ªçc: ${lang}\n7. S·ª©c kh·ªèe & Ngo·∫°i h√¨nh: ${health}\n8. Th·ªùi gian l√†m vi·ªác: ${time}\n9. ƒê·ªô tu·ªïi & Gi·ªõi t√≠nh: ${demo}\n10. Quy·ªÅn l·ª£i: ${benefit}`;
        };

        // --- COMPONENTS ---
        const IntroBlog = () => (
            <div className="glass-panel p-8 rounded-2xl mb-8 animate-fade-in bg-gradient-to-br from-white to-sky-50 border-l-4 border-sky-500 shadow-md">
                <div className="flex flex-col md:flex-row items-start gap-6">
                    <div className="bg-white p-4 rounded-full text-sky-600 shadow-lg border border-sky-100 hidden md:block"><Icon name="Star" size={40} className="text-yellow-500" /></div>
                    <div className="flex-1">
                        <h2 className="text-2xl font-bold text-sky-900 mb-3 flex items-center gap-2"><span className="text-3xl">‚ú®</span> L√†m th·∫ø n√†o ƒë·ªÉ vi·∫øt CV ph√π h·ª£p v·ªõi Nh√† tuy·ªÉn d·ª•ng?</h2>
                        <div className="text-gray-700 text-base leading-relaxed space-y-3">
                            <p className="font-medium text-red-600 bg-red-50 p-3 rounded-lg border border-red-100"><strong>Th·ª±c tr·∫°ng ƒë√°ng b√°o ƒë·ªông:</strong> H∆°n 70% sinh vi√™n ƒêi·ªÅu d∆∞·ª°ng m·ªõi ra tr∆∞·ªùng b·ªã lo·∫°i h·ªì s∆° do kh√¥ng bi·∫øt c√°ch tr√¨nh b√†y nƒÉng l·ª±c l√¢m s√†ng.</p>
                            <p>Nh√† tuy·ªÉn d·ª•ng Y t·∫ø c·∫ßn th·∫•y: <strong>K·ªπ thu·∫≠t c·ª• th·ªÉ</strong>, <strong>Kh·∫£ nƒÉng tr·ª±c ƒë√™m</strong> v√† <strong>Y ƒë·ª©c</strong>. Trang web n√†y gi√∫p b·∫°n chu·∫©n h√≥a CV theo ƒë√∫ng chu·∫©n b·ªánh vi·ªán.</p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const JobMatcher = ({ onSelectJob }) => {
            const [filter, setFilter] = useState({ location: "", specialty: "", experience: "new", nightShift: "yes", salary: "" });
            const [suggestions, setSuggestions] = useState([]);
            const [warning, setWarning] = useState(null);

            const handleSearch = () => {
                setWarning(null); setSuggestions([]);
                const cityName = filter.location;
                if (!cityName) return alert("Vui l√≤ng ch·ªçn khu v·ª±c l√†m vi·ªác!");
                const userSalary = parseInt(filter.salary) || 0;
                
                const isMajor = ["H√† N·ªôi", "TP. H·ªì Ch√≠ Minh", "ƒê√† N·∫µng"].includes(cityName);
                let maxRealistic = isMajor ? (filter.experience === 'new' ? 15 : 25) : 12;
                
                if (userSalary > maxRealistic) {
                    setWarning({
                        message: `M·ª©c l∆∞∆°ng ${userSalary}.000.000 VNƒê l√† ch∆∞a kh·∫£ thi t·∫°i ${cityName}.`,
                        detail: "V·ªõi kinh nghi·ªám hi·ªán t·∫°i, th·ªã tr∆∞·ªùng th∆∞·ªùng chi tr·∫£ th·∫•p h∆°n. H√£y c√¢n nh·∫Øc c√°c ph√∫c l·ª£i kh√°c ngo√†i l∆∞∆°ng c·ª©ng."
                    });
                    return;
                }

                let hospitals = REAL_HOSPITALS_DB[cityName] || [`B·ªánh vi·ªán ƒêa khoa ${cityName}`, `Trung t√¢m Y t·∫ø ${cityName}`];
                const specObj = SPECIALTIES.find(s => s.id === filter.specialty);
                const specName = specObj ? specObj.name.split(':')[0] : "ƒêi·ªÅu d∆∞·ª°ng";

                const results = hospitals.slice(0, 5).map(h => ({
                    name: h,
                    type: h.toLowerCase().includes('vinmec') ? "T∆∞ nh√¢n" : "C√¥ng l·∫≠p",
                    jd: `Tuy·ªÉn ${specName}. Y√™u c·∫ßu: T·ªët nghi·ªáp chuy√™n ng√†nh. Tr·ª±c ƒë√™m theo ph√¢n c√¥ng.`,
                    salary: userSalary > 0 ? `~${userSalary}.000.000 VNƒê` : "Th·ªèa thu·∫≠n"
                }));
                setSuggestions(results);
            };

            return (
                <div className="h-full flex flex-col">
                    <h3 className="text-sky-800 font-bold mb-2 flex items-center gap-2"><Icon name="MapPin" className="text-sky-500" /> T√¨m n∆°i l√†m vi·ªác ph√π h·ª£p</h3>
                    <p className="text-sm text-gray-600 mb-4 italic">"N·∫øu b·∫°n v·∫´n ch∆∞a t√¨m ƒë∆∞·ª£c b·∫øn ƒë·ªó ∆∞ng √Ω, h√£y ƒë·ªÉ ch√∫ng t√¥i h·ªó tr·ª£ g·ª£i √Ω nh·ªØng n∆°i ph√π h·ª£p nh·∫•t v·ªõi nƒÉng l·ª±c c·ªßa b·∫°n..."</p>
                    <div className="space-y-3 bg-sky-50 p-4 rounded-xl border border-sky-100">
                        <div><label className="text-xs font-bold text-sky-700">Khu v·ª±c</label><select className="w-full mt-1 p-2 rounded border text-sm" value={filter.location} onChange={e => setFilter({...filter, location: e.target.value})}><option value="">-- Ch·ªçn T·ªânh/Th√†nh --</option>{PROVINCES.map(p => <option key={p} value={p}>{p}</option>)}</select></div>
                        <div><label className="text-xs font-bold text-sky-700">Chuy√™n khoa</label><select className="w-full mt-1 p-2 rounded border text-sm" value={filter.specialty} onChange={e => setFilter({...filter, specialty: e.target.value})}><option value="">-- Ch·ªçn chuy√™n khoa --</option>{SPECIALTIES.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}</select></div>
                        <div className="grid grid-cols-2 gap-2"><div><label className="text-xs font-bold text-sky-700">Kinh nghi·ªám</label><select className="w-full mt-1 p-2 rounded border text-sm" value={filter.experience} onChange={e => setFilter({...filter, experience: e.target.value})}><option value="new">M·ªõi ra tr∆∞·ªùng</option><option value="1-3">1-3 nƒÉm</option><option value=">3">> 3 nƒÉm</option></select></div><div><label className="text-xs font-bold text-sky-700">Tr·ª±c ƒë√™m</label><select className="w-full mt-1 p-2 rounded border text-sm" value={filter.nightShift} onChange={e => setFilter({...filter, nightShift: e.target.value})}><option value="yes">C√≥ th·ªÉ</option><option value="no">Kh√¥ng th·ªÉ</option></select></div></div>
                        <div>
                            <label className="text-xs font-bold text-sky-700">M·ª©c l∆∞∆°ng mong mu·ªën</label>
                            <div className="mt-1 flex items-center">
                                <span className="p-2 bg-white border border-r-0 rounded-l text-gray-500 font-bold text-sm">[</span>
                                <input type="text" className="w-16 p-2 text-center border-t border-b border-gray-200 text-sm font-bold text-sky-800 outline-none" placeholder="___" maxLength={3} value={filter.salary} onChange={(e) => setFilter({...filter, salary: e.target.value.replace(/[^0-9]/g, '')})}/>
                                <div className="flex-1 p-2 rounded-r border border-l-0 text-sm bg-white text-gray-600 font-medium">.000.000 VNƒê</div>
                            </div>
                        </div>
                        <button onClick={handleSearch} className="w-full bg-sky-600 text-white py-2 rounded font-bold hover:bg-sky-700 mt-2">T√¨m ki·∫øm</button>
                    </div>
                    {warning && <div className="mt-4 p-3 bg-red-50 text-red-700 text-sm rounded border-l-4 border-red-500">{warning.message} <br/><span className="text-xs">{warning.detail}</span></div>}
                    <div className="mt-4 flex-1 overflow-y-auto space-y-2">{suggestions.map((h, i) => <div key={i} className="bg-white p-3 rounded border shadow-sm"><div className="font-bold text-sky-800">{h.name}</div><div className="text-xs text-gray-500">{h.type} - {h.salary}</div></div>)}</div>
                </div>
            );
        };

        const InterviewPractice = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [currentQ, setCurrentQ] = useState(0); 
            const [score, setScore] = useState(0); 
            const [showResult, setShowResult] = useState(false); 
            const [selected, setSelected] = useState(null);
            
            const QUESTIONS = [
                { id: 1, question: "Khi th·ª±c hi·ªán y l·ªánh d√πng thu·ªëc, '5 ƒê√∫ng' bao g·ªìm nh·ªØng g√¨?", options: ["A. ƒê√∫ng ng∆∞·ªùi b·ªánh, ƒë√∫ng thu·ªëc, ƒë√∫ng li·ªÅu, ƒë√∫ng ƒë∆∞·ªùng d√πng, ƒë√∫ng th·ªùi gian.", "B. Sai"], correct: 0, explain: "Nguy√™n t·∫Øc v√†ng." },
                { id: 2, question: "B·ªánh nh√¢n ng√£ trong nh√† v·ªá sinh, h√†nh ƒë·ªông ƒê·∫¶U TI√äN?", options: ["A. ƒê·ª° d·∫≠y", "B. ƒê√°nh gi√° ch·∫•n th∆∞∆°ng t·∫°i ch·ªó", "C. G·ªçi b√°c sƒ©"], correct: 1, explain: "An to√†n l√† tr√™n h·∫øt." },
                { id: 3, question: "Quy tr√¨nh r·ª≠a tay th∆∞·ªùng quy?", options: ["A. 10s", "B. 20-30s", "C. 1 ph√∫t"], correct: 1, explain: "Theo BYT." },
                // ... (Th√™m c√¢u h·ªèi n·∫øu c·∫ßn)
            ];
            
            const handleAnswer = (idx) => { if(selected !== null) return; setSelected(idx); if(idx === QUESTIONS[currentQ].correct) setScore(score+1); };
            const next = () => { if(currentQ < QUESTIONS.length-1) { setCurrentQ(currentQ+1); setSelected(null); } else setShowResult(true); };
            const restart = () => { setCurrentQ(0); setScore(0); setShowResult(false); setSelected(null); };
            
            if(!isOpen) return <div className="text-center my-6"><button onClick={()=>setIsOpen(true)} className="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition flex items-center gap-2 mx-auto"><Icon name="Quiz"/> B·∫ÆT ƒê·∫¶U LUY·ªÜN T·∫¨P PH·ªéNG V·∫§N (30 C√ÇU)</button></div>;

            if(showResult) return <div className="glass-panel p-6 text-center"><div className="text-2xl font-bold text-sky-600">ƒêi·ªÉm: {score}/{QUESTIONS.length}</div><p className="text-gray-600">B·∫°n ƒë√£ ho√†n th√†nh b√†i luy·ªán t·∫≠p!</p><button onClick={restart} className="mt-4 px-4 py-2 bg-sky-600 text-white rounded">L√†m l·∫°i</button><button onClick={()=>setIsOpen(false)} className="mt-4 ml-2 px-4 py-2 text-gray-500">ƒê√≥ng</button></div>;
            
            const q = QUESTIONS[currentQ];
            return (
                <div className="glass-panel p-6 mt-6 border-t-4 border-purple-500">
                    <div className="flex justify-between mb-4"><span className="font-bold text-purple-700 text-lg">C√¢u h·ªèi ph·ªèng v·∫•n</span><button onClick={()=>setIsOpen(false)} className="text-red-500 font-bold">ƒê√≥ng</button></div>
                    <div className="flex justify-between mb-2"><span className="font-bold text-purple-700">C√¢u {currentQ+1}</span></div>
                    <h4 className="font-bold mb-4">{q.question}</h4>
                    <div className="space-y-2">{q.options.map((o,i)=><button key={i} onClick={()=>handleAnswer(i)} disabled={selected!==null} className={`w-full text-left p-3 rounded border ${selected===i?(i===q.correct?'bg-green-100':'bg-red-100'):''}`}>{o}</button>)}</div>
                    {selected!==null && <button onClick={next} className="mt-4 w-full py-2 bg-purple-600 text-white rounded">Ti·∫øp theo</button>}
                </div>
            );
        };

        const FileUpload = ({ onTextExtracted }) => {
            const fileInputRef = useRef(null);
            const cameraInputRef = useRef(null);
            
            const handleFile = async (e) => {
                const file = e.target.files[0];
                if(file) {
                    let text = "";
                    if(file.type.startsWith('image/')) {
                        text = `[·∫¢NH/CAMERA] ${file.name}`; // Gi·∫£ l·∫≠p n·ªôi dung t·ª´ ·∫£nh
                        onTextExtracted(text, file.name);
                        return;
                    }
                    if(window.pdfjsLib && file.name.endsWith('.pdf')) {
                        try {
                            const arrayBuffer = await file.arrayBuffer();
                            const pdf = await window.pdfjsLib.getDocument(arrayBuffer).promise;
                            for(let i=1; i<=pdf.numPages; i++) {
                                const page = await pdf.getPage(i);
                                const content = await page.getTextContent();
                                text += content.items.map(item => item.str).join(" ") + "\n";
                            }
                        } catch(e) { text = ""; }
                    } else {
                        text = "N·ªôi dung Text (Gi·∫£ l·∫≠p): Nguy·ªÖn VƒÉn A. C·ª≠ nh√¢n ƒêi·ªÅu d∆∞·ª°ng. Kinh nghi·ªám: 2 nƒÉm t·∫°i BV t·ªânh. K·ªπ nƒÉng: Ti√™m truy·ªÅn, ChƒÉm s√≥c b·ªánh nh√¢n."; 
                    }
                    onTextExtracted(text, file.name);
                }
            };

            return (
                <div className="border-2 border-dashed border-sky-300 rounded-xl p-8 hover:bg-sky-50 transition text-center mb-4">
                    <div className="flex justify-center gap-4">
                        <div onClick={() => fileInputRef.current.click()} className="cursor-pointer flex flex-col items-center hover:text-sky-600 transition">
                            <div className="bg-white p-3 rounded-full text-sky-600 shadow-sm border border-sky-100 mb-2"><Icon name="Upload" size={24}/></div>
                            <span className="text-sm font-bold text-sky-700">T·∫£i File (PDF/Word)</span>
                        </div>
                        <div className="w-px bg-sky-200 h-16"></div>
                        <div onClick={() => cameraInputRef.current.click()} className="cursor-pointer flex flex-col items-center hover:text-sky-600 transition">
                            <div className="bg-white p-3 rounded-full text-sky-600 shadow-sm border border-sky-100 mb-2"><Icon name="Camera" size={24}/></div>
                            <span className="text-sm font-bold text-sky-700">Ch·ª•p ·∫¢nh CV</span>
                        </div>
                    </div>
                    <input ref={fileInputRef} type="file" className="hidden" accept=".pdf,.doc,.docx,.txt,image/*" onChange={handleFile} />
                    <input ref={cameraInputRef} type="file" className="hidden" accept="image/*" capture="environment" onChange={handleFile} />
                </div>
            );
        };

        const MockAI = {
            analyzeCV: (cvText, jdText) => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const text = cvText.toLowerCase();
                        const jd = jdText.toLowerCase();
                        let score = 50;
                        let strengths = [];
                        let weaknesses = [];
                        let suggestions = [];

                        // Logic 1-1 Comparison (Ph√¢n t√≠ch s√¢u)
                        const requirements = [
                            { key: ['ƒë·∫°i h·ªçc', 'cao ƒë·∫≥ng', 'c·ª≠ nh√¢n'], label: 'Tr√¨nh ƒë·ªô h·ªçc v·∫•n', category: 'b·∫±ng c·∫•p' },
                            { key: ['ch·ª©ng ch·ªâ', 'cchn'], label: 'Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ', category: 'b·∫±ng c·∫•p' },
                            { key: ['ngo·∫°i ng·ªØ', 'ti·∫øng anh', 'toeic'], label: 'Ngo·∫°i ng·ªØ', category: 'k·ªπ nƒÉng' },
                            { key: ['tin h·ªçc', 'm√°y t√≠nh'], label: 'Tin h·ªçc vƒÉn ph√≤ng', category: 'k·ªπ nƒÉng' },
                            { key: ['kinh nghi·ªám', 'nƒÉm'], label: 'Kinh nghi·ªám l√†m vi·ªác', category: 'kinh nghi·ªám' },
                            { key: ['k·ªπ nƒÉng', 'c·∫•p c·ª©u', 'ti√™m', 'm√°y th·ªü'], label: 'K·ªπ nƒÉng chuy√™n m√¥n', category: 'k·ªπ nƒÉng' },
                            { key: ['th√°i ƒë·ªô', 'trung th·ª±c', '√°p l·ª±c'], label: 'Th√°i ƒë·ªô/Ph·∫©m ch·∫•t', category: 'th√°i ƒë·ªô' },
                            { key: ['s·ª©c kh·ªèe', 'ngo·∫°i h√¨nh'], label: 'S·ª©c kh·ªèe/Ngo·∫°i h√¨nh', category: 's·ª©c kh·ªèe' },
                            { key: ['th·ªùi gian', 'tr·ª±c ƒë√™m', 'ca k√≠p'], label: 'Th·ªùi gian l√†m vi·ªác', category: 'th√°i ƒë·ªô' },
                            { key: ['tu·ªïi', 'nam', 'n·ªØ'], label: 'ƒê·ªô tu·ªïi/Gi·ªõi t√≠nh', category: 'th√¥ng tin c√° nh√¢n' }
                        ];

                        requirements.forEach(req => {
                            // Check if JD requires this
                            const jdNeeds = req.key.some(k => jd.includes(k));
                            if (jdNeeds) {
                                // Check if CV satisfies it
                                const cvHas = req.key.some(k => text.includes(k));
                                if (cvHas) {
                                    strengths.push(`‚úÖ ${req.label}: B·∫°n ƒë√£ c√≥ th√¥ng tin n√†y trong CV, ph√π h·ª£p v·ªõi y√™u c·∫ßu.`);
                                    score += 10;
                                } else {
                                    weaknesses.push(`‚ùå ${req.label}: JD y√™u c·∫ßu nh∆∞ng CV c·ªßa b·∫°n ch∆∞a th·∫•y ƒë·ªÅ c·∫≠p.`);
                                    suggestions.push(`üëâ B·ªï sung m·ª•c "${req.label}": H√£y ghi r√µ (V√≠ d·ª•: "C√≥ CCHN", "S·∫µn s√†ng tr·ª±c ƒë√™m"). N·∫øu ch∆∞a c√≥, h√£y th·ªÉ hi·ªán s·ª± cam k·∫øt h·ªçc h·ªèi.`);
                                    score -= 5;
                                }
                            }
                        });

                        // Logic b·ªï sung
                        if (text.includes("·∫£nh/camera")) {
                            weaknesses.push("CV d·∫°ng ·∫£nh: H·ªá th·ªëng ATS kh√≥ ƒë·ªçc t·ª± ƒë·ªông.");
                            suggestions.push("N√™n chuy·ªÉn n·ªôi dung sang file PDF ƒë·ªÉ h·ªá th·ªëng ATS c·ªßa b·ªánh vi·ªán c√≥ th·ªÉ qu√©t t·ª´ kh√≥a t·ªët h∆°n.");
                        }

                        if (!text.includes("@") && !text.includes("sƒët")) {
                            weaknesses.push("Thi·∫øu th√¥ng tin li√™n h·ªá (Email/SƒêT).");
                            suggestions.push("B·∫Øt bu·ªôc th√™m Email v√† S·ªë ƒëi·ªán tho·∫°i ·ªü ƒë·∫ßu trang.");
                        }

                        score = Math.min(100, Math.max(10, score));
                        let summary = score > 75 ? "H·ªì s∆° Ti·ªÅm nƒÉng" : "C·∫ßn b·ªï sung th√¥ng tin";

                        resolve({
                            score,
                            summary,
                            strengths: strengths.length ? strengths : ["C·∫•u tr√∫c c∆° b·∫£n t·∫°m ·ªïn"],
                            weaknesses: weaknesses.length ? weaknesses : ["Ch∆∞a l√†m n·ªïi b·∫≠t ƒë∆∞·ª£c nƒÉng l·ª±c so v·ªõi JD"],
                            suggestions: suggestions.length ? suggestions : ["R√† so√°t l·∫°i to√†n b·ªô CV theo JD."]
                        });
                    }, 2000);
                });
            }
        };

        const App = () => {
            const [view, setView] = useState('input');
            const [cvText, setCvText] = useState('');
            const [jdText, setJdText] = useState('');
            const [result, setResult] = useState(null);
            const [fileName, setFileName] = useState('');
            const [quickHospitalSearch, setQuickHospitalSearch] = useState('');
            const [hospitalSuggestions, setHospitalSuggestions] = useState([]);

            const handleAnalyze = async () => {
                if(!fileName && !cvText) return alert("Vui l√≤ng t·∫£i CV l√™n!");
                if(!jdText) return alert("Vui l√≤ng nh·∫≠p JD ho·∫∑c ch·ªçn b·ªánh vi·ªán ƒë·ªÉ so s√°nh!");
                setView('analyzing');
                const res = await MockAI.analyzeCV(cvText, jdText);
                setResult(res);
                setView('report');
            };
            
            const handleHospitalInputChange = (e) => {
                const val = e.target.value;
                setQuickHospitalSearch(val);
                if(val.length > 0) {
                    const filtered = VIETNAM_HOSPITALS.filter(h => h.toLowerCase().includes(val.toLowerCase()));
                    setHospitalSuggestions(filtered.slice(0, 5));
                } else {
                    setHospitalSuggestions([]);
                }
            };

            const selectHospital = (hospitalName) => {
                setQuickHospitalSearch(hospitalName);
                setHospitalSuggestions([]);
                
                // T·ª± ƒë·ªông t·∫°o JD 10 y·∫øu t·ªë
                setJdText(generateJD(hospitalName));
            };

            const handleManualSearch = () => {
                // N·∫øu ng∆∞·ªùi d√πng b·∫•m t√¨m m√† kh√¥ng ch·ªçn g·ª£i √Ω
                if (!quickHospitalSearch.trim()) return;
                // Ki·ªÉm tra xem t√™n c√≥ trong DB kh√¥ng
                const exists = VIETNAM_HOSPITALS.some(h => h.toLowerCase() === quickHospitalSearch.toLowerCase());
                if (exists) {
                     setJdText(generateJD(quickHospitalSearch));
                } else {
                    alert("Kh√¥ng t√¨m th·∫•y b·ªánh vi·ªán n√†y trong h·ªá th·ªëng. B·∫°n vui l√≤ng t·ª± nh·∫≠p n·ªôi dung JD v√†o √¥ b√™n d∆∞·ªõi ƒë·ªÉ ƒë·∫£m b·∫£o ch√≠nh x√°c.");
                    setJdText(""); // Clear ƒë·ªÉ ng∆∞·ªùi d√πng nh·∫≠p
                }
            };

            const scrollToSection = (id) => {
                const element = document.getElementById(id);
                if (element) element.scrollIntoView({ behavior: 'smooth' });
            };

            return (
                <div className="min-h-screen pb-12 flex flex-col">
                    <nav className="bg-white/90 backdrop-blur sticky top-0 z-50 border-b border-sky-100 px-6 py-3 shadow-sm">
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <div className="flex items-center gap-2 text-2xl font-black text-sky-700">
                                <Icon name="MedicalCross" size={24} className="text-sky-600"/> CV Master <span className="text-sky-400">AI</span>
                            </div>
                            <div className="hidden md:flex gap-4 text-sm font-bold text-gray-600">
                                <button onClick={() => window.scrollTo({top:0, behavior:'smooth'})}>Trang ch·ªß</button>
                                <button onClick={() => scrollToSection('upload-area')}>Ph√¢n t√≠ch</button>
                                <button onClick={() => scrollToSection('interview-practice')}>Luy·ªán Ph·ªèng v·∫•n</button>
                                <button onClick={() => scrollToSection('tools-area')}>C√¥ng c·ª•</button>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-6xl mx-auto p-6 mt-2 flex-grow w-full">
                        {view === 'input' && (
                            <div className="animate-fade-in">
                                <div className="text-center mb-6">
                                    <h1 className="text-3xl font-extrabold text-sky-900 mb-2">C√°ch Vi·∫øt CV <span className="medical-gradient-text">Chinh Ph·ª•c Nh√† Tuy·ªÉn D·ª•ng</span></h1>
                                    <p className="text-sky-600">C√¥ng c·ª• t·ªëi ∆∞u h√≥a h·ªì s∆° ·ª©ng vi√™n Y t·∫ø</p>
                                </div>
                                <IntroBlog />

                                <div className="flex flex-col gap-6">
                                    {/* AREA 1: CV & JD & Analyze */}
                                    <div id="upload-area" className="glass-panel p-6 rounded-2xl">
                                        <h3 className="text-xl font-bold text-sky-900 mb-4 flex items-center gap-2">
                                            <Icon name="FileText" className="text-sky-500"/> H·ªì s∆° & Y√™u c·∫ßu (JD)
                                        </h3>
                                        
                                        <div className="grid md:grid-cols-2 gap-6">
                                            {/* Left: CV Upload Only */}
                                            <div className="flex-1 flex flex-col gap-3">
                                                <label className="font-bold text-gray-700 text-sm">1. T·∫£i l√™n CV c·ªßa b·∫°n (File/·∫¢nh/Camera)</label>
                                                <FileUpload onTextExtracted={(txt, name) => { setCvText(txt); setFileName(name); }} />
                                                {fileName && <div className="text-xs text-green-700 bg-green-50 p-2 rounded border border-green-200 text-center"><Icon name="Check" size={12}/> ƒê√£ nh·∫≠n h·ªì s∆°: {fileName}</div>}
                                                <textarea className="hidden" value={cvText} onChange={e => setCvText(e.target.value)}></textarea>
                                            </div>

                                            {/* Right: JD Input & Search */}
                                            <div className="flex-1 flex flex-col gap-3 relative">
                                                <label className="font-bold text-gray-700 text-sm">2. Tra c·ª©u & Nh·∫≠p JD B·ªánh vi·ªán</label>
                                                <div className="flex-1 border border-red-200 rounded-xl p-3 bg-red-50/30 flex flex-col gap-3 relative">
                                                    <div className="relative">
                                                        <input 
                                                            type="text" 
                                                            className="w-full p-2 rounded border border-red-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-400"
                                                            placeholder="Nh·∫≠p t√™n b·ªánh vi·ªán (VD: B·∫°ch Mai)..."
                                                            value={quickHospitalSearch}
                                                            onChange={handleHospitalInputChange}
                                                        />
                                                         <button 
                                                            onClick={handleManualSearch}
                                                            className="absolute right-1 top-1 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-xs font-bold transition"
                                                        >
                                                            L·∫•y JD
                                                        </button>

                                                        {/* Autocomplete Suggestions */}
                                                        {hospitalSuggestions.length > 0 && (
                                                            <div className="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 mt-1 max-h-40 overflow-y-auto">
                                                                {hospitalSuggestions.map((hospitalName, idx) => (
                                                                    <div 
                                                                        key={idx}
                                                                        onClick={() => selectHospital(hospitalName)}
                                                                        className="p-2 hover:bg-red-50 cursor-pointer text-sm text-gray-700 border-b border-gray-100 last:border-0"
                                                                    >
                                                                        {hospitalName}
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        )}
                                                    </div>
                                                    <textarea 
                                                        className="flex-1 w-full p-3 rounded border border-red-200 text-sm bg-white" 
                                                        placeholder="N·ªôi dung JD (g·ªìm 10 y·∫øu t·ªë: Tr√¨nh ƒë·ªô, Ch·ª©ng ch·ªâ, Kinh nghi·ªám, K·ªπ nƒÉng, Th√°i ƒë·ªô...) s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y..." 
                                                        value={jdText} 
                                                        onChange={(e) => setJdText(e.target.value)}
                                                        style={{minHeight: '150px'}}
                                                    ></textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="mt-8 flex justify-center">
                                            <button onClick={handleAnalyze} className="group bg-gradient-to-r from-sky-600 to-blue-700 text-white px-10 py-4 rounded-full font-bold shadow-xl hover:shadow-2xl hover:-translate-y-1 transition flex items-center gap-3 text-lg">
                                                <Icon name="BrainCircuit" size={24} className="group-hover:animate-pulse"/> PH√ÇN T√çCH & SO S√ÅNH NGAY
                                            </button>
                                        </div>
                                    </div>

                                    {/* Interview Practice Section (Hidden behind button) */}
                                    <div id="interview-practice">
                                        <InterviewPractice />
                                    </div>

                                    {/* AREA 2: Tools (Job Matcher) */}
                                    <div id="tools-area" className="glass-panel p-6 rounded-2xl">
                                        <JobMatcher onSelectJob={(job) => { setJdText(job.jd); scrollTo('upload-area'); }} />
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'analyzing' && (
                            <div className="flex flex-col items-center justify-center h-[50vh] animate-fade-in">
                                <div className="w-20 h-20 border-4 border-sky-200 border-t-sky-600 rounded-full animate-spin mb-6"></div>
                                <h3 className="text-xl font-bold text-sky-900">ƒêang ph√¢n t√≠ch h·ªì s∆°...</h3>
                                <p className="text-gray-500 mt-2">So s√°nh chi ti·∫øt CV c·ªßa b·∫°n v·ªõi JD b·ªánh vi·ªán...</p>
                            </div>
                        )}

                        {view === 'report' && result && (
                            <div className="animate-fade-in space-y-6 max-w-4xl mx-auto">
                                <button onClick={()=>setView('input')} className="text-sky-600 font-bold hover:underline flex items-center gap-1">‚Üê Quay l·∫°i</button>
                                <div className="glass-panel p-8 rounded-2xl text-center border-t-8 border-sky-500 shadow-2xl bg-white">
                                    <div className="text-sm font-bold text-gray-400 uppercase tracking-widest mb-2">ƒê√°nh gi√° m·ª©c ƒë·ªô ph√π h·ª£p</div>
                                    <div className="text-7xl font-black text-sky-600 mb-2">{result.score}/100</div>
                                    <div className="font-bold text-xl text-gray-800">{result.summary}</div>
                                </div>
                                
                                <div className="grid md:grid-cols-3 gap-6">
                                    <div className="bg-white p-6 rounded-2xl border-l-4 border-green-500 shadow-sm">
                                        <h4 className="font-bold text-green-700 text-lg mb-4 flex items-center gap-2"><Icon name="Check" size={20}/> ∆Øu ƒëi·ªÉm (ƒê√£ c√≥ trong JD)</h4>
                                        <ul className="space-y-3">
                                            {result.strengths.map((s,i)=>(
                                                <li key={i} className="text-sm text-gray-700 bg-green-50 p-3 rounded-lg">
                                                    {s}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>

                                    <div className="bg-white p-6 rounded-2xl border-l-4 border-red-500 shadow-sm">
                                        <h4 className="font-bold text-red-700 text-lg mb-4 flex items-center gap-2"><Icon name="XCircle" size={20}/> Nh∆∞·ª£c ƒëi·ªÉm (Thi·∫øu so v·ªõi JD)</h4>
                                        <ul className="space-y-3">
                                            {result.weaknesses.map((w,i)=>(
                                                <li key={i} className="text-sm text-gray-700 bg-red-50 p-3 rounded-lg">
                                                    {w}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>

                                    <div className="bg-gradient-to-b from-blue-50 to-white p-6 rounded-2xl border border-blue-100 shadow-lg">
                                        <h4 className="font-bold text-blue-800 text-lg mb-4 flex items-center gap-2"><Icon name="Edit" size={20}/> L·ªùi khuy√™n t·ª´ HR</h4>
                                        <ul className="space-y-3">
                                            {result.suggestions.map((s,i)=>(
                                                <li key={i} className="text-sm text-gray-700 flex gap-2">
                                                    <span className="text-blue-500 font-bold">üëâ</span>
                                                    {s}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="mt-8 py-6 bg-white border-t border-sky-100 text-center text-gray-500 text-sm">
                        <div className="max-w-4xl mx-auto px-4">
                            <p className="font-bold text-sky-800 mb-1">D·ª± √°n ph√°t tri·ªÉn b·ªüi Sinh vi√™n ƒêi·ªÅu d∆∞·ª°ng & Gemini AI</p>
                            <p>C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng. Ch√∫c b·∫°n s·ªõm t√¨m ƒë∆∞·ª£c c√¥ng vi·ªác ∆∞ng √Ω!</p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
